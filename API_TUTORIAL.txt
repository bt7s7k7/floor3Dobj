================================================================================
                    ğŸ  FLOORPLAN TO GLB API - TUTORIAL
================================================================================

Tento tutorial vÃ¡s nauÄÃ­ ako pouÅ¾Ã­vaÅ¥ Docker sluÅ¾bu na konverziu obrÃ¡zkov 
pÃ´dorysov na 3D GLB modely.

================================================================================
ğŸ“‹ PREHÄ½AD SLUÅ½BY
================================================================================

SluÅ¾ba beÅ¾Ã­ na: http://localhost:5002

Workflow:
PNG/JPG obrÃ¡zok â†’ AI spracovanie â†’ 3D generovanie â†’ GLB export â†’ Base64 response

PodporovanÃ© formÃ¡ty:
- Vstup: PNG, JPG, JPEG (max 16MB)
- VÃ½stup: GLB (Binary glTF) ako Base64 string

================================================================================
ğŸš€ RÃCHLY START
================================================================================

1. Kontrola stavu sluÅ¾by:
   curl -X GET http://localhost:5002/health

2. Test GLB exportu:
   curl -X GET http://localhost:5002/test-glb-export -o test.json

3. PoÅ¡lite obrÃ¡zok a dostanete GLB:
   curl -X POST -F 'image=@your_image.png' http://localhost:5002/process-glb -o result.json

================================================================================
ğŸ“¡ API ENDPOINTY
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. HEALTH CHECK                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

URL: GET http://localhost:5002/health

PrÃ­klad:
curl -X GET http://localhost:5002/health

Response:
{
  "blender_path": "/Applications/Blender.app/Contents/MacOS/Blender",
  "openai_configured": true,
  "status": "healthy",
  "timestamp": "2025-09-21T10:57:16.181779"
}

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. TEST GLB EXPORT                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

URL: GET http://localhost:5002/test-glb-export

PrÃ­klad:
curl -X GET http://localhost:5002/test-glb-export -o test_response.json

Response:
{
  "success": true,
  "model": "Z2xURgIAAADYNwMAAEpTT057ImFzc2V0Ijp7ImdlbmVyYXRvciI6...",
  "format": "glb",
  "metadata": {
    "test_file": "example5_ai_blender.blend",
    "file_size_bytes": 227192,
    "base64_size_chars": 302924,
    "timestamp": "2025-09-21T10:57:16.181779"
  }
}

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. KOMPLETNÃ WORKFLOW (PNG â†’ GLB)                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

URL: POST http://localhost:5002/process-glb

PrÃ­klad:
curl -X POST \
  -F 'image=@Images/Examples/example5.png' \
  http://localhost:5002/process-glb \
  -o my_result.json

Response:
{
  "success": true,
  "model": "Z2xURgIAAADYNwMAAEpTT057ImFzc2V0Ijp7ImdlbmVyYXRvciI6...",
  "format": "glb",
  "metadata": {
    "request_id": "abc12345",
    "timestamp": "20250921_105716",
    "original_filename": "example5.png",
    "file_size_bytes": 227192,
    "base64_size_chars": 302924,
    "rooms": 7,
    "walls": 234,
    "area": 325794,
    "dimensions": {"width": 0, "height": 0, "depth": 2.5}
  }
}

================================================================================
ğŸ’» DEKÃ“DOVANIE GLB SÃšBORU
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PYTHON                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

import json
import base64

# NaÄÃ­tajte API response
with open('my_result.json', 'r') as f:
    data = json.load(f)

if data['success']:
    # DekÃ³dujte Base64 GLB
    glb_base64 = data['model']
    glb_data = base64.b64decode(glb_base64)
    
    # UloÅ¾te GLB sÃºbor
    with open('my_model.glb', 'wb') as f:
        f.write(glb_data)
    
    print(f"âœ… GLB sÃºbor uloÅ¾enÃ½: my_model.glb")
    print(f"ğŸ“Š VeÄ¾kosÅ¥: {len(glb_data):,} bytes")
    
    # Metadata
    metadata = data['metadata']
    print(f"ğŸ  Miestnosti: {metadata['rooms']}")
    print(f"ğŸ§± Steny: {metadata['walls']}")

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BASH (One-liner)                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# KompletnÃ½ workflow v jednom prÃ­kaze
curl -X GET http://localhost:5002/test-glb-export | \
python3 -c "
import json, base64, sys
data = json.load(sys.stdin)
if data['success']:
    glb = base64.b64decode(data['model'])
    open('result.glb', 'wb').write(glb)
    print('âœ… GLB saved: result.glb')
"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ JAVASCRIPT/NODE.JS                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// Upload image and get GLB
const formData = new FormData();
formData.append('image', imageFile);

fetch('http://localhost:5002/process-glb', {
    method: 'POST',
    body: formData
})
.then(response => response.json())
.then(data => {
    if (data.success) {
        // Decode Base64 GLB
        const glbBase64 = data.model;
        const glbArrayBuffer = Uint8Array.from(atob(glbBase64), c => c.charCodeAt(0));
        
        // Create blob for Three.js
        const glbBlob = new Blob([glbArrayBuffer], {type: 'model/gltf-binary'});
        
        // Load in Three.js
        const loader = new THREE.GLTFLoader();
        loader.load(URL.createObjectURL(glbBlob), (gltf) => {
            scene.add(gltf.scene);
            console.log('âœ… GLB model loaded in Three.js!');
        });
        
        // Or save as file (Node.js)
        const fs = require('fs');
        fs.writeFileSync('model.glb', Buffer.from(glbBase64, 'base64'));
    }
});

================================================================================
ğŸ§ª TESTOVANIE
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RÃCHLY TEST                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# Spustite rÃ½chly test
python3 quick_test.py

# OÄakÃ¡vanÃ½ vÃ½stup:
# âœ… SUCCESS!
# GLB file: quick_test_1758445036.glb
# Size: 227,192 bytes
# Format: âœ… Valid GLB

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MANUÃLNE TESTY                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# Test 1: Health check
curl -X GET http://localhost:5002/health

# Test 2: GLB export
curl -X GET http://localhost:5002/test-glb-export -o test.json

# Test 3: DekÃ³dovanie GLB
python3 -c "
import json, base64
data = json.load(open('test.json'))
glb = base64.b64decode(data['model'])
open('decoded.glb', 'wb').write(glb)
print('âœ… GLB decoded: decoded.glb')
"

# Test 4: VerifikÃ¡cia GLB sÃºboru
file decoded.glb
# OÄakÃ¡vanÃ½ vÃ½stup: glTF binary model, version 2

================================================================================
ğŸ”§ RIEÅ ENIE PROBLÃ‰MOV
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ÄŒASTÃ‰ PROBLÃ‰MY                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. SluÅ¾ba nebeÅ¾Ã­:
   - Skontrolujte: curl -X GET http://localhost:5002/health
   - RieÅ¡enie: ReÅ¡tartujte sluÅ¾bu

2. "OpenAI not configured":
   - Skontrolujte .env sÃºbor
   - RieÅ¡enie: echo "OPENAI_API_KEY=your_key" > .env

3. "Billing hard limit reached":
   - OpenAI API limit dosiahnutÃ½
   - SluÅ¾ba pokraÄuje s pÃ´vodnÃ½m obrÃ¡zkom (bez AI Äistenia)

4. VeÄ¾kÃ½ sÃºbor (>16MB):
   - ZmenÅ¡ite obrÃ¡zok
   - Alebo zvÃ½Å¡te MAX_CONTENT_LENGTH v kÃ³de

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DEBUGGING                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# Verbose curl
curl -X GET http://localhost:5002/health -v

# Kontrola logov sluÅ¾by
# Pozrite si terminÃ¡l kde beÅ¾Ã­ docker_ai_service.py

# Test s malÃ½m obrÃ¡zkom
curl -X POST -F 'image=@Images/Examples/example.png' \
     http://localhost:5002/test-glb-export \
     --max-time 60 -v

================================================================================
ğŸ“Š VÃKON A LIMITY
================================================================================

TypickÃ© Äasy spracovania:
- AI preprocessing: 10-30s (ak funguje OpenAI)
- 3D generovanie: 30-60s
- GLB export: 5-15s
- Celkom: 1-2 minÃºty

Limity:
- Max veÄ¾kosÅ¥ sÃºboru: 16MB
- Timeout: 5 minÃºt
- PodporovanÃ© formÃ¡ty: PNG, JPG, JPEG

VÃ½stupnÃ½ GLB:
- TypickÃ¡ veÄ¾kosÅ¥: 50KB - 500KB
- Base64 je ~33% vÃ¤ÄÅ¡Ã­ ako binÃ¡rny GLB
- Obsahuje geometriu + materiÃ¡ly v jednom sÃºbore

================================================================================
ğŸ¯ INTEGRÃCIA DO APLIKÃCIÃ
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ REACT/JAVASCRIPT FRONTEND                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

const uploadFloorplan = async (imageFile) => {
  const formData = new FormData();
  formData.append('image', imageFile);
  
  try {
    const response = await fetch('http://localhost:5002/process-glb', {
      method: 'POST',
      body: formData
    });
    
    const result = await response.json();
    
    if (result.success) {
      // DekÃ³dujte GLB
      const glbData = atob(result.model);
      const glbArray = new Uint8Array(glbData.length);
      for (let i = 0; i < glbData.length; i++) {
        glbArray[i] = glbData.charCodeAt(i);
      }
      
      // Vytvorte blob pre Three.js
      const glbBlob = new Blob([glbArray], {type: 'model/gltf-binary'});
      const glbUrl = URL.createObjectURL(glbBlob);
      
      // NaÄÃ­tajte do Three.js
      const loader = new THREE.GLTFLoader();
      loader.load(glbUrl, (gltf) => {
        scene.add(gltf.scene);
        console.log('âœ… 3D model naÄÃ­tanÃ½!');
      });
      
      return {
        success: true,
        glbUrl: glbUrl,
        metadata: result.metadata
      };
    }
  } catch (error) {
    console.error('âŒ Upload failed:', error);
    return { success: false, error: error.message };
  }
};

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PYTHON BACKEND                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

import requests
import base64
import json

def convert_floorplan_to_glb(image_path, output_path):
    """Convert floorplan image to GLB using API"""
    
    api_url = "http://localhost:5002/process-glb"
    
    try:
        # Upload image
        with open(image_path, 'rb') as f:
            files = {'image': f}
            response = requests.post(api_url, files=files, timeout=300)
        
        if response.status_code == 200:
            data = response.json()
            
            if data['success']:
                # Decode GLB
                glb_base64 = data['model']
                glb_data = base64.b64decode(glb_base64)
                
                # Save GLB file
                with open(output_path, 'wb') as f:
                    f.write(glb_data)
                
                return {
                    'success': True,
                    'output_file': output_path,
                    'metadata': data['metadata']
                }
            else:
                return {'success': False, 'error': data.get('error')}
        else:
            return {'success': False, 'error': f'HTTP {response.status_code}'}
            
    except Exception as e:
        return {'success': False, 'error': str(e)}

# PouÅ¾itie:
result = convert_floorplan_to_glb('my_floorplan.png', 'output.glb')
if result['success']:
    print(f"âœ… GLB created: {result['output_file']}")
    print(f"ğŸ“Š Rooms: {result['metadata']['rooms']}")
    print(f"ğŸ“Š Walls: {result['metadata']['walls']}")

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CURL PRÃKLADY                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# ZÃ¡kladnÃ½ test
curl -X GET http://localhost:5002/health

# GLB export test
curl -X GET http://localhost:5002/test-glb-export -o test.json

# Upload obrÃ¡zka a zÃ­skanie GLB
curl -X POST \
  -F 'image=@Images/Examples/example5.png' \
  http://localhost:5002/process-glb \
  -o result.json \
  --max-time 300

# DekÃ³dovanie GLB z response (Linux/Mac)
cat result.json | jq -r '.model' | base64 -d > model.glb

# DekÃ³dovanie GLB s Python
python3 -c "
import json, base64
data = json.load(open('result.json'))
if data['success']:
    glb = base64.b64decode(data['model'])
    open('model.glb', 'wb').write(glb)
    print('âœ… GLB saved: model.glb')
    print(f'ğŸ“Š Size: {len(glb):,} bytes')
else:
    print(f'âŒ Error: {data[\"error\"]}')
"

================================================================================
ğŸ“‹ RESPONSE FORMÃT
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ÃšSPEÅ NÃ RESPONSE                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

{
  "success": true,
  "model": "Z2xURgIAAADYNwMAAEpTT05...",  // Base64 encoded GLB data
  "format": "glb",
  "metadata": {
    "request_id": "abc12345",              // Unique request ID
    "timestamp": "20250921_105716",        // Processing timestamp
    "original_filename": "example5.png",   // Original image name
    "file_size_bytes": 227192,             // GLB file size in bytes
    "base64_size_chars": 302924,           // Base64 string length
    "rooms": 7,                            // Detected rooms count
    "walls": 234,                          // Detected walls count
    "area": 325794,                        // Approximate area
    "dimensions": {                        // 3D dimensions
      "width": 0,
      "height": 0,
      "depth": 2.5
    }
  }
}

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CHYBOVÃ RESPONSE                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

{
  "success": false,
  "error": "Processing failed: Blender execution failed"
}

MoÅ¾nÃ© chyby:
- "No image file provided" - ChÃ½ba image parameter
- "Only PNG, JPG, JPEG files allowed" - NesprÃ¡vny formÃ¡t sÃºboru
- "OpenAI not configured" - ChÃ½ba OPENAI_API_KEY
- "Blender processing failed" - ProblÃ©m s 3D generovanÃ­m
- "GLB export failed" - ProblÃ©m s GLB exportom

================================================================================
ğŸ® POUÅ½ITIE V THREE.JS
================================================================================

// HTML
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>

// JavaScript
async function loadFloorplanModel(imageFile) {
  // 1. Upload to API
  const formData = new FormData();
  formData.append('image', imageFile);
  
  const response = await fetch('http://localhost:5002/process-glb', {
    method: 'POST',
    body: formData
  });
  
  const data = await response.json();
  
  if (data.success) {
    // 2. Decode Base64 GLB
    const glbBase64 = data.model;
    const glbBinary = atob(glbBase64);
    const glbArray = new Uint8Array(glbBinary.length);
    for (let i = 0; i < glbBinary.length; i++) {
      glbArray[i] = glbBinary.charCodeAt(i);
    }
    
    // 3. Create blob URL
    const glbBlob = new Blob([glbArray], {type: 'model/gltf-binary'});
    const glbUrl = URL.createObjectURL(glbBlob);
    
    // 4. Load in Three.js
    const loader = new THREE.GLTFLoader();
    return new Promise((resolve, reject) => {
      loader.load(
        glbUrl,
        (gltf) => {
          resolve({
            model: gltf.scene,
            metadata: data.metadata
          });
        },
        undefined,
        reject
      );
    });
  } else {
    throw new Error(data.error);
  }
}

// PouÅ¾itie:
loadFloorplanModel(imageFile).then(({model, metadata}) => {
  scene.add(model);
  console.log(`âœ… Model loaded: ${metadata.rooms} rooms, ${metadata.walls} walls`);
});

================================================================================
ğŸ³ DOCKER NASADENIE
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LOKÃLNE SPUSTENIE                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# 1. Nastavte .env sÃºbor
echo "OPENAI_API_KEY=your_api_key_here" > .env

# 2. Spustite sluÅ¾bu
cd /Users/matuskolejak/Downloads/meltflex/floor3Dobj
source venv/bin/activate
BLENDER_PATH="/Applications/Blender.app/Contents/MacOS/Blender" PORT=5002 python3 docker_ai_service.py

# 3. Testujte
curl -X GET http://localhost:5002/health

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DOCKER COMPOSE                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# Build Docker image
docker-compose -f docker-compose.ai.yml build

# Spustite sluÅ¾by
docker-compose -f docker-compose.ai.yml up -d

# Testujte cez nginx (port 8081)
curl -X GET http://localhost:8081/health

# Zastavte sluÅ¾by
docker-compose -f docker-compose.ai.yml down

================================================================================
ğŸ“ˆ PRODUKÄŒNÃ‰ NASADENIE
================================================================================

Pre produkÄnÃ© nasadenie odporÃºÄame:

1. PouÅ¾iÅ¥ WSGI server (Gunicorn)
2. Nginx reverse proxy
3. SSL certifikÃ¡ty
4. Rate limiting
5. Monitoring (health checks)
6. HorizontÃ¡lne Å¡kÃ¡lovanie

PrÃ­klad produkÄnej konfigurÃ¡cie je v docker-compose.ai.yml

================================================================================
ğŸ‰ ZÃVER
================================================================================

VaÅ¡a Docker sluÅ¾ba je plne funkÄnÃ¡ a pripravenÃ¡ na pouÅ¾itie!

Workflow: PNG obrÃ¡zok â†’ AI spracovanie â†’ 3D model â†’ GLB sÃºbor â†’ Base64 API

HlavnÃ½ endpoint:
POST http://localhost:5002/process-glb

Response: GLB model ako Base64 string s metadÃ¡tami

âœ… SluÅ¾ba je pripravenÃ¡ na integrÃ¡ciu do vaÅ¡ich aplikÃ¡ciÃ­!

================================================================================
ğŸ“ KONTAKT A PODPORA
================================================================================

Pre technickÃº podporu:
- Skontrolujte logy sluÅ¾by
- Otestujte health endpoint
- PreÄÃ­tajte si README_DOCKER.md

SluÅ¾ba vytvorenÃ¡: September 2025
Verzia: 1.0.0
Status: Production Ready âœ…

================================================================================
